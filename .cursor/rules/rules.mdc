---
alwaysApply: true
---

# Cursor Rules for Reply Challenge Project

## General Principles

You are an expert Python developer with deep knowledge of:
- Modern Python (3.10+) best practices
- Type hints and static typing
- Clean architecture and SOLID principles
- Async/await patterns
- Testing and documentation

## Code Style

### Python Standards
- Follow PEP 8 style guide strictly
- Use type hints for all function signatures
- Maximum line length: 88 characters (Black formatter standard)
- Use `snake_case` for functions and variables
- Use `PascalCase` for classes
- Use `UPPER_SNAKE_CASE` for constants

### Type Hints
```python
from typing import Dict, List, Optional, Union

def function_name(arg: str, optional_arg: Optional[int] = None) -> Dict[str, Any]:
    """Always include type hints."""
    pass
```

### Docstrings
- Use Google-style docstrings for all modules, classes, and functions
- Include Args, Returns, Raises, and Examples sections where appropriate

```python
def example_function(param: str) -> bool:
    """Brief description of the function.
    
    More detailed explanation if needed.
    
    Args:
        param: Description of the parameter
        
    Returns:
        Description of the return value
        
    Raises:
        ValueError: When param is invalid
        
    Example:
        >>> example_function("test")
        True
    """
    pass
```

## Project Structure

### Organization
```
Reply challenge/
├── Agent/          # Agent implementations
├── tools/          # Tool functions (utilities for agents)
├── app.py          # Main application entry point
├── tests/          # Test files (when created)
└── .env            # Environment variables (not in git)
```

### Import Order
1. Standard library imports
2. Third-party imports
3. Local application imports

```python
import os
from typing import Dict

from google.adk.agents import Agent
from dotenv import load_dotenv

from tools import get_current_time
```

## Best Practices

### Error Handling
- Use specific exceptions, not bare `except:`
- Always provide context in error messages
- Log errors appropriately

```python
try:
    result = risky_operation()
except SpecificError as e:
    logger.error(f"Operation failed: {e}")
    raise
```

### Function Design
- Keep functions small and focused (Single Responsibility)
- Use descriptive names
- Avoid side effects when possible
- Return early to reduce nesting

### Async Code
- Use `async def` for I/O-bound operations
- Properly await all async calls
- Use `asyncio.gather()` for concurrent operations

```python
async def fetch_data() -> Dict[str, Any]:
    """Async functions should be clearly marked."""
    async with aiohttp.ClientSession() as session:
        async with session.get(url) as response:
            return await response.json()
```

## Testing

### Test Structure
- Use `pytest` as the testing framework
- Organize tests to mirror source structure
- Use descriptive test names: `test_<function>_<condition>_<expected>`

```python
def test_get_current_time_valid_city_returns_success():
    """Test that get_current_time returns success for valid city."""
    result = get_current_time("Paris")
    assert result["status"] == "success"
    assert result["city"] == "Paris"
```

### Test Coverage
- Aim for >80% code coverage
- Test edge cases and error conditions
- Use fixtures for common setup
- Mock external dependencies

## Documentation

### README Updates
- Keep README.md current with project changes
- Include setup instructions
- Document all environment variables
- Provide usage examples

### Code Comments
- Explain "why", not "what"
- Update comments when code changes
- Remove commented-out code before committing

## Git Practices

### Commits
- Write clear, descriptive commit messages
- Use conventional commits format:
  - `feat:` new feature
  - `fix:` bug fix
  - `docs:` documentation changes
  - `refactor:` code refactoring
  - `test:` test additions/changes

### Before Committing
- Run linters (`ruff`, `mypy`)
- Run tests
- Update documentation
- Check `.gitignore` for sensitive files

## Security

### Environment Variables
- Never hardcode secrets
- Always use `.env` for sensitive data
- Validate environment variables at startup
- Document all required env vars in `.env.example`

### API Keys
- Use environment variables for all API keys
- Rotate keys regularly
- Use different keys for dev/staging/prod

## Performance

### Optimization
- Profile before optimizing
- Use appropriate data structures
- Consider caching for expensive operations
- Use generators for large datasets

```python
# Good: Generator for large datasets
def process_large_file(filepath: str):
    with open(filepath) as f:
        for line in f:
            yield process_line(line)
```

## Dependencies

### Management
- Keep `requirements.txt` minimal and updated
- Pin versions for reproducibility
- Document why each dependency is needed
- Regularly update dependencies for security

## Google ADK Specific

### Agent Development
- Use descriptive agent names
- Provide clear instructions to agents
- Test tools independently before adding to agents
- Use LiteLLM for multi-model support

### Tool Development
- Keep tools focused and reusable
- Include comprehensive docstrings
- Add type hints
- Handle errors gracefully

```python
def tool_function(param: str) -> Dict[str, Any]:
    """Clear description of what the tool does.
    
    Args:
        param: What this parameter represents
        
    Returns:
        Structure of the return value
    """
    try:
        # Tool implementation
        return {"status": "success", "data": result}
    except Exception as e:
        return {"status": "error", "message": str(e)}
```

## Code Review Checklist

Before submitting code, verify:
- [ ] Type hints on all functions
- [ ] Docstrings on all public functions
- [ ] Tests written and passing
- [ ] No hardcoded secrets
- [ ] Error handling in place
- [ ] Imports organized
- [ ] Code formatted (Black/Ruff)
- [ ] No linter warnings
- [ ] Documentation updated
- [ ] Commit message is clear

## Additional Guidelines

### Naming Conventions
- Be descriptive over brief
- Use full words, not abbreviations (except common ones like `url`, `api`)
- Boolean variables should start with `is_`, `has_`, `can_`

### Constants
```python
# Module-level constants at the top
MAX_RETRIES: int = 3
DEFAULT_TIMEOUT: float = 30.0
API_BASE_URL: str = "https://api.example.com"
```

### Logging
```python
import logging

logger = logging.getLogger(__name__)

logger.info("Operation completed successfully")
logger.warning("Unusual condition detected")
logger.error("Operation failed", exc_info=True)
```

---

Remember: Write code that is readable, maintainable, and testable. Future you (and your teammates) will thank you!



